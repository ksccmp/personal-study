# Database

## 커넥션풀 (Connection pool)
### 커넥션풀이란 ?
* 구조
  <img src="image/connectionPoolStructure.PNG" width="800px" height="400px" title="커넥션풀 구조" alt="ConnectionPool Structure">
* 데이터베이스와 연결된 커넥션을 미리 만들어서 풀속에 저장해 두고 있다가 필요할 때 커넥션을 풀에서 쓰고 다시 풀에 반환하는 기법
* 웹 프로그램에서는 데이터베이스의 환경설정과 연결관리 등을 따로 xml파일이나 속성파일을 사용해서 관리
### 사용이유
* 사용자가 데이터베이스를 사용할 때마다 커넥션을 생성하여 연결해야 되는 비효율적인 문제를 해결하기 위해 사용
* 예를들어 웹사이트에 사용자가 게시판을 확인하고 게시물도 수정하고 새로운 게시물을 등록한다면 DB접속은 총 3번이 필요하다 (데이터 검색, 데이터 갱신, 데이터 삽입)
* 커넥션풀은 이렇게 3번의 커넥션을 생성하는 것 대신에 미리 생성된 커넥션을 빌려줌으로 써 기존에 풀에 생성된 커넥션을 제외하고는 커넥션 생성을 하지 않음
### 사용자가 풀안에 있는 커넥션보다 많다면 ?
* 현재 커넥션을 사용하고 있는 사용자가 커넥션을 풀에 반납할 때까지 기다리다가 들어온 사용자 순서대로 다시 커넥션을 빌려준다